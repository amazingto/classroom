(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/course/FinishDetail"],{"0a2e":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement;e._self._c},n=[];i.d(t,"a",function(){return r}),i.d(t,"b",function(){return n})},"11f5":function(e,t,i){"use strict";i.r(t);var r=i("f612"),n=i.n(r);for(var o in r)"default"!==o&&function(e){i.d(t,e,function(){return r[e]})}(o);t["default"]=n.a},"74ba":function(e,t,i){"use strict";(function(e){i("d6b1"),i("921b");r(i("66fd"));var t=r(i("d425"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("6e42")["createPage"])},8194:function(e,t,i){"use strict";var r=i("e2ef"),n=i.n(r);n.a},d425:function(e,t,i){"use strict";i.r(t);var r=i("0a2e"),n=i("11f5");for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);i("8194");var a=i("2877"),s=Object(a["a"])(n["default"],r["a"],r["b"],!1,null,"4f7f491c",null);t["default"]=s.exports},e2ef:function(e,t,i){},f612:function(e,t,i){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){return i.e("pages/component/unik-modal").then(i.bind(null,"9019"))},o={components:{unikModal:n},data:function(){return{modalTitle:"提示",src:"",tabbar:["详情","目录"],winHeight:"",currentTab:0,scrollLeft:0,currentTime:0,seenTime:0,videoContext:null,initialTime:0,list:[],courseId:0,chapterId:0,majorId:0,videoUrl:0,intro:[],catalog:[],timer:null,httpUrl:this.GLOBAL.httpUrl}},onLoad:function(t){var i=this;console.log(e(t," at pages/course/FinishDetail.vue:115")),i.courseId=t.fcourseId,i.majorId=t.fmajorId,r.getSystemInfo({success:function(e){var t=e.windowHeight;i.winHeight=t-50-230}})},onReady:function(e){this.videoContext=r.createVideoContext("myVideo")},onHide:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},onBackPress:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},mounted:function(){var t=this,i=r.getStorageSync("studentId");r.request({url:this.httpUrl+"/course/operate/chapterGet",method:"POST",data:{courseId:this.courseId},header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){e=e.data,0===e.code&&(t.catalog=e.list)}}),r.request({url:this.httpUrl+"/course/operate/courseBaseMsgGet",method:"POST",data:{courseId:this.courseId,studentId:i,majorId:this.majorId},header:{"content-type":"application/x-www-form-urlencoded"},success:function(i){if(0===i.data.code){t.chapterId=i.data.playEntity.chapterId,console.log(e("当前播放的章节id："+t.chapterId," at pages/course/FinishDetail.vue:174"));var r=i.data.path.substr(8,[i.data.path.length]),n=r.replace(/\\/g,"/");t.src=t.httpUrl+n,console.log(e(t.src," at pages/course/FinishDetail.vue:179")),t.seenTime=i.data.playEntity.maxTime,t.videoContext.seek(Math.floor(i.data.playEntity.processTime)),t.intro=i.data.entity}}})},methods:{show:function(t,i){this.$refs.unikModal.show(),this.chapterId=t,this.videoUrl=i,console.log(e("播放id="+this.chapterId+"这章"," at pages/course/FinishDetail.vue:192")),console.log(e("视频路径为："+this.videoUrl," at pages/course/FinishDetail.vue:193"))},confirmModal:function(){var e=this,t=r.getStorageSync("studentId");r.request({url:this.httpUrl+"/vedio/operate/vedioPlay",method:"POST",data:{chapterId:this.chapterId,studentId:t,majorId:this.majorId},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){if(0===t.data.code){var i=e.videoUrl.substr(8,[e.videoUrl.length]),r=i.replace(/\\/g,"/");e.src=e.httpUrl+r,e.seenTime=t.data.maxTime,e.videoContext.seek(Math.floor(t.data.currentTime))}}})},cancelModal:function(){console.log(e("您点击了关闭"," at pages/course/FinishDetail.vue:222"))},videoErrorCallback:function(e){r.showModal({content:e.target.errMsg,showCancel:!1})},getRandomColor:function(){for(var e=[],t=0;t<3;++t){var i=Math.floor(256*Math.random()).toString(16);i=1==i.length?"0"+i:i,e.push(i)}return"#"+e.join("")},switchTab:function(e){this.currentTab=e.detail.current,this.checkCor()},swichNav:function(e){var t=e.currentTarget.dataset.current;if(this.currentTab==t)return!1;this.currentTab=t},checkCor:function(){this.currentTab>3?this.scrollLeft=300:this.scrollLeft=0},bindplay:function(t){var i=this,n=r.getStorageSync("studentId");console.log(e("开始播放"," at pages/course/FinishDetail.vue:266")),r.request({url:i.httpUrl+"/vedio/operate/insertMsgFirstTime",method:"POST",data:{chapterId:i.chapterId,studentId:n,belongMajor:i.majorId},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){0===t.data.code&&console.log(e("请求成功"," at pages/course/FinishDetail.vue:280"))}}),this.timer=setInterval(function(){r.request({url:i.httpUrl+"/vedio/operate/timeSet",method:"POST",data:{chapterId:i.chapterId,studentId:n,processTime:i.currentTime},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){0===t.data.code&&console.log(e("请求成功"," at pages/course/FinishDetail.vue:303"))}})},2e3)},bindpause:function(e){this.timer&&(clearInterval(this.timer),this.timer=null)},timeupdate:function(e){if(e.detail.currentTime>this.seenTime&&e.detail.currentTime-this.currentTime>3)return 0!=this.seenTime?(this.currentTime=e.detail.currentTime,this.videoContext.seek(Math.floor(this.seenTime)),!1):(this.videoContext.seek(Math.floor(this.currentTime)),!1);this.currentTime=e.detail.currentTime,e.detail.currentTime-this.seenTime>.3&&(this.seenTime=e.detail.currentTime)}}};t.default=o}).call(this,i("0de9")["default"],i("6e42")["default"])}},[["74ba","common/runtime","common/vendor"]]]);