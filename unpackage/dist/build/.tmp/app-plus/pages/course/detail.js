(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/course/detail"],{"25b4":function(t,e,a){"use strict";a.r(e);var o=a("6890"),r=a("c5e5");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);a("c374");var n=a("2877"),s=Object(n["a"])(r["default"],o["a"],o["b"],!1,null,"591b825c",null);e["default"]=s.exports},6890:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},r=[];a.d(e,"a",function(){return o}),a.d(e,"b",function(){return r})},"692c":function(t,e,a){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(){return a.e("pages/component/unik-modal").then(a.bind(null,"9019"))},i={components:{unikModal:r},data:function(){return{modalTitle:"提示",src:"",tabbar:["详情","目录"],winHeight:"",currentTab:0,scrollLeft:0,currentTime:0,seenTime:0,icon:"../../static/mix-tree/dati.png",videoContext:null,initialTime:0,list:[],courseId:0,chapterId:0,majorId:0,videoUrl:0,intro:[],catalog:[],timer:null,httpUrl:this.GLOBAL.httpUrl}},onLoad:function(e){var a=this;console.log(t(e," at pages/course/detail.vue:124")),a.courseId=e.courseId,a.majorId=e.majorId,o.getSystemInfo({success:function(t){var e=t.windowHeight;a.winHeight=e-50-230}})},onReady:function(t){this.videoContext=o.createVideoContext("myVideo")},onHide:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},onBackPress:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},mounted:function(){var e=this,a=o.getStorageSync("studentId");o.request({url:this.httpUrl+"/course/operate/chapterGet",method:"POST",data:{courseId:this.courseId},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){t=t.data,0===t.code&&(e.catalog=t.list)}}),o.request({url:this.httpUrl+"/course/operate/courseBaseMsgGet",method:"POST",data:{courseId:this.courseId,studentId:a,majorId:this.majorId},header:{"content-type":"application/x-www-form-urlencoded"},success:function(a){if(0===a.data.code){e.chapterId=a.data.playEntity.chapterId,console.log(t("当前播放的章节id："+e.chapterId," at pages/course/detail.vue:182"));var o=a.data.path.substr(8,[a.data.path.length]),r=o.replace(/\\/g,"/");e.src=e.httpUrl+r,console.log(t(e.src," at pages/course/detail.vue:187")),e.seenTime=a.data.playEntity.maxTime,e.videoContext.seek(Math.floor(a.data.playEntity.processTime)),e.intro=a.data.entity}}})},methods:{show:function(e,a){this.$refs.unikModal.show(),this.chapterId=e,this.videoUrl=a,console.log(t("播放id="+this.chapterId+"这章"," at pages/course/detail.vue:200")),console.log(t("视频路径为："+this.videoUrl," at pages/course/detail.vue:201"))},confirmModal:function(){var t=this,e=o.getStorageSync("studentId");o.request({url:this.httpUrl+"/vedio/operate/vedioPlay",method:"POST",data:{chapterId:this.chapterId,studentId:e,majorId:this.majorId},header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){if(0===e.data.code){var a=t.videoUrl.substr(8,[t.videoUrl.length]),o=a.replace(/\\/g,"/");t.src=t.httpUrl+o,t.seenTime=e.data.maxTime,t.videoContext.seek(Math.floor(e.data.currentTime))}}})},cancelModal:function(){console.log(t("您点击了关闭"," at pages/course/detail.vue:230"))},studyconfirm:function(){console.log(t("传给test的专业id："+this.majorId," at pages/course/detail.vue:233")),o.navigateTo({url:"../questions/test?chapterId="+this.chapterId+"&majorId="+this.majorId})},exercisesModal:function(){var e=this,a=o.getStorageSync("studentId");this.timer&&(clearInterval(this.timer),this.timer=null),o.request({url:this.httpUrl+"/exam/operate/isComplete",method:"POST",data:{chapterId:this.chapterId,studentId:a,majorId:this.majorId},header:{"content-type":"application/x-www-form-urlencoded"},success:function(a){0===a.data.code?(e.$refs.studymodal.show(),console.log(t("开始习题"," at pages/course/detail.vue:258"))):-2===a.data.code&&e.tui.toast("该节的习题已经完成")}})},exercises:function(e){var a=this;this.chapterId=e,console.log(t(e," at pages/course/detail.vue:267"));var r=o.getStorageSync("studentId");o.request({url:this.httpUrl+"/exam/operate/isComplete",method:"POST",data:{chapterId:this.chapterId,studentId:r,majorId:this.majorId},header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){0===e.data.code?(a.$refs.studymodal.show(),console.log(t("播放结束"," at pages/course/detail.vue:283"))):-2===e.data.code?a.tui.toast("该节的习题已经完成"):-1===e.data.code&&a.tui.toast("请看完视频再做习题")}})},examination:function(){var t=this,e=o.getStorageSync("studentId");o.request({url:this.httpUrl+"/exam/operate/isExam",method:"POST",data:{courseId:this.courseId,studentId:e,majorId:this.majorId},header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){0===e.data.code?o.navigateTo({url:"../questions/exam?courseId="+t.courseId+"&majorId="+t.majorId}):t.tui.toast("请完成所有章节的学习再考试")}})},videoErrorCallback:function(t){o.showModal({content:t.target.errMsg,showCancel:!1})},getRandomColor:function(){for(var t=[],e=0;e<3;++e){var a=Math.floor(256*Math.random()).toString(16);a=1==a.length?"0"+a:a,t.push(a)}return"#"+t.join("")},switchTab:function(t){this.currentTab=t.detail.current,this.checkCor()},swichNav:function(t){var e=t.currentTarget.dataset.current;if(this.currentTab==e)return!1;this.currentTab=e},checkCor:function(){this.currentTab>3?this.scrollLeft=300:this.scrollLeft=0},bindplay:function(e){var a=this,r=o.getStorageSync("studentId");console.log(t("开始播放"," at pages/course/detail.vue:363")),o.request({url:a.httpUrl+"/vedio/operate/insertMsgFirstTime",method:"POST",data:{chapterId:a.chapterId,studentId:r,belongMajor:a.majorId},header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){0===e.data.code?console.log(t("请求成功"," at pages/course/detail.vue:377")):-1===e.data.code?a.tui.toast("您已看完视频，请及时完成习题"):-2===e.data.code&&a.tui.toast("您已经完成该课程，请及时完成考试")}}),this.timer=setInterval(function(){o.request({url:a.httpUrl+"/vedio/operate/timeSet",method:"POST",data:{chapterId:a.chapterId,studentId:r,processTime:a.currentTime,majorId:a.majorId},header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){0===e.data.code&&console.log(t("请求成功"," at pages/course/detail.vue:400"))}})},2e3)},bindpause:function(t){this.timer&&(clearInterval(this.timer),this.timer=null)},timeupdate:function(t){if(t.detail.currentTime>this.seenTime&&t.detail.currentTime-this.currentTime>3)return 0!=this.seenTime?(this.currentTime=t.detail.currentTime,this.videoContext.seek(Math.floor(this.seenTime)),!1):(this.videoContext.seek(Math.floor(this.currentTime)),!1);this.currentTime=t.detail.currentTime,t.detail.currentTime-this.seenTime>.3&&(this.seenTime=t.detail.currentTime)}}};e.default=i}).call(this,a("0de9")["default"],a("6e42")["default"])},b940:function(t,e,a){"use strict";(function(t){a("d6b1"),a("921b");o(a("66fd"));var e=o(a("25b4"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},c374:function(t,e,a){"use strict";var o=a("cca2"),r=a.n(o);r.a},c5e5:function(t,e,a){"use strict";a.r(e);var o=a("692c"),r=a.n(o);for(var i in o)"default"!==i&&function(t){a.d(e,t,function(){return o[t]})}(i);e["default"]=r.a},cca2:function(t,e,a){}},[["b940","common/runtime","common/vendor"]]]);